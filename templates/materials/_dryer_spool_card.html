<div class="card h-100 filament-card border-warning border-2">
    <div class="card-header d-flex justify-content-between align-items-center bg-warning-subtle">
        <span class="badge bg-dark font-monospace">{{ spool.short_id }}</span>
        <span class="fw-bold">{{ spool.filament_type.manufacturer }}</span>
    </div>

    <div class="card-body d-flex flex-column">
        <div class="spool-visualization mb-3">
            <div class="spool-filament-color" style="background-color: {{ spool.filament_type.color_hex }};"></div>
            <img src="{{ url_for('static', filename='spule_cover_light.png') }}" class="spool-cover" alt="Helles Spulen-Cover">
        </div>

        <h5 class="card-title fs-6">{{ spool.filament_type.name }} <span class="badge bg-secondary fw-normal">{{ spool.filament_type.material_type }}</span></h5>
        
        <div class="mt-auto pt-3">
            <ul class="list-group list-group-flush">
                <li class="list-group-item d-flex justify-content-between align-items-center px-0">
                    <i class="bi bi-thermometer-half me-2"></i> Temperatur
                    <span class="badge bg-danger rounded-pill">{{ spool.drying_temp or 'N/A' }} Â°C</span>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center px-0">
                    <i class="bi bi-droplet-half me-2"></i> Luftfeuchte
                    <span class="badge bg-primary rounded-pill">{{ spool.drying_humidity or 'N/A' }} %</span>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center px-0">
                    <i class="bi bi-clock me-2"></i> Gestartet am
                    <small>{{ spool.drying_start_time.strftime('%d.%m.%Y %H:%M') if spool.drying_start_time else 'N/A' }}</small>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center px-0">
                    <strong><i class="bi bi-hourglass-split me-2"></i> Laufzeit</strong>
                    <strong class="font-monospace drying-timer" data-start-time="{{ (spool.drying_start_time.isoformat() + 'Z') if spool.drying_start_time else '' }}">00:00:00</strong>
                </li>
            </ul>
        </div>
    </div>
    <div class="card-footer text-center p-2">
         <form action="{{ url_for('materials_bp.stop_drying', spool_id=spool.id) }}" method="POST" class="d-inline w-100">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
            <button type="submit" class="btn btn-sm btn-danger w-100">
                <i class="bi bi-stop-circle-fill"></i> Trocknung beenden
            </button>
        </form>
    </div>
</div>