{% extends "base.html" %}

{% block title %}Filament-Typen verwalten{% endblock %}

{% block content %}
<div class="main-header">
    <h1><i class="bi bi-pencil-square"></i> Filament-Typen (Obergruppen)</h1>
    <div class="header-actions">
        <a href="{{ url_for('materials_bp.list_filaments') }}" class="btn btn-secondary"><i class="bi bi-arrow-left"></i> Zurück zum Inventar</a>
        <a href="{{ url_for('materials_bp.add_type') }}" class="btn btn-primary"><i class="bi bi-plus-circle-fill"></i> Neuer Typ</a>
    </div>
</div>

<div class="card">
    <div class="card-content table-responsive">
        <table class="table table-hover align-middle">
            <thead>
                <tr>
                    <th style="width: 5%;">Farbe</th>
                    <th>Hersteller</th>
                    <th>Name</th>
                    <th>Material</th>
                    <th>Spulen im Inventar</th>
                    <th style="width: 15%;">Aktionen</th>
                </tr>
            </thead>
            <tbody>
                {% for ftype in types %}
                <tr>
                    <td>
                        <div style="width: 25px; height: 25px; background-color: {{ ftype.color_hex or '#ffffff' }}; border-radius: 50%; border: 1px solid #555;"></div>
                    </td>
                    <td>{{ ftype.manufacturer }}</td>
                    <td><strong>{{ ftype.name }}</strong></td>
                    <td><span class="badge bg-secondary">{{ ftype.material_type }}</span></td>
                    <td>
                        <span class="badge bg-success">{{ ftype.available_spool_count }} Verfügbar</span>
                        <span class="badge bg-info">{{ ftype.total_spool_count }} Total</span>
                    </td>
                    <td>
                        <a href="{{ url_for('materials_bp.manage_spools', type_id=ftype.id) }}" class="btn btn-sm btn-outline-success" title="Spulen verwalten"><i class="bi bi-stack"></i></a>
                        <a href="{{ url_for('materials_bp.edit_type', type_id=ftype.id) }}" class="btn btn-sm btn-outline-primary" title="Typ bearbeiten"><i class="bi bi-pencil-fill"></i></a>
                        <button type="button" class="btn btn-sm btn-outline-danger" title="Typ löschen"
                                data-bs-toggle="modal"
                                data-bs-target="#confirmDeleteModal"
                                data-item-type="Filament-Typ"
                                data-item-name="{{ ftype.manufacturer }} {{ ftype.name }}"
                                data-form-action="{{ url_for('materials_bp.delete_type', type_id=ftype.id) }}">
                            <i class="bi bi-trash-fill"></i>
                        </button>
                    </td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="6" class="text-center text-muted">Keine Filament-Typen vorhanden. Legen Sie Ihren ersten Typ an!</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}